# 開発者のためのリーン開発 × LLM入門  
― Proactive Delta Context と delta コマンドフロー ―

## 1. リーン開発とは？ ― ムダを削り、流れを止めない開発

リーン開発は、ムダを最小化し価値を滞りなく流すための考え方です。トヨタ生産方式（TPS）に端を発し、「少ない資源で高品質を維持し、流れを止めない」ことを目的とします。ソフトウェアでも以下のムダが発生しがちです。

| ムダの種類 | ソフトウェアでの例 |
| --- | --- |
| 過剰生産 | 実際には使われない機能を先回りして実装 |
| 手待ち | レビュー・仕様待ちで開発が止まる |
| 過剰処理 | 必要以上の最適化や書き直し |
| 不良 | バグや誤仕様による再作業 |
| 余剰在庫 | 未リリースのコード・設計書 |
| 無駄な動作 | 重複する会議・承認 |
| 無駄な移動 | 情報が分断し、確認に時間がかかる |

リーン開発の目的は「ムダを減らし、流れ (flow) を保つ」こと。速さよりも「止まらずに流れる」状態が重要です。

## 2. LLM生成とムダ ― 「たくさん出す」は効率化ではない

LLM はコードや設計文書を瞬時に生成できますが、入力が曖昧・過多であると以下のムダを誘発します。

- 不要情報の混入  
- 変更前後が混ざった矛盾（ハルシネーション）  
- 修正の繰り返し  

大量生成 = 高効率ではなく、リーン視点では過剰生産や不良そのものです。必要なものを必要なだけ正確に流すことが重要で、それを実現するのが「Proactive Delta Context」です。

## 3. Proactive Delta Context ― 変更差分に閉じた整流構造

**定義**: Proactive Delta Context とは、変更や修正に必要な最小限の差分情報（Δ）だけを抽出し、その範囲に閉じた文脈で正確に処理する仕組みです。全体を再生成するのではなく「変えるべき箇所だけを最小文脈で流す」考え方で、以下の効果があります。

- 無関係な部分への影響（ハルシネーション）の防止  
- 再計算・再検証・再構築のムダ削減  
- フロー全体を「止まらない状態」に維持  

リーン開発における「一個流し (one-piece flow)」を LLM 時代の知的作業へ適用した構造です。

## 4. delta フローとは？ ― 差分を流すための実装構造

Proactive Delta Context を実際の開発フローに落とし込むのが以下の delta コマンド群です。

```
┌────────────┐
│ delta concept │   ← 上流：変更群の設計・方向付け
└─────┬──────┘
      │
      ▼
┌────────────┐
│ delta propose │   ← 中流：差分単位の変更案形成
└─────┬──────┘
      │
      ▼
┌────────────┐
│ delta verify │   ← 品質ゲート（全段階に適用）
└─────┬──────┘
      │
      ▼
┌────────────┐
│ delta apply │   ← 実装：差分の適用
└─────┬──────┘
      │
      ▼
┌────────────┐
│ delta archive │ ← 終端：整流・履歴化
└────────────┘
```

## 5. 各コマンドの役割とリーン的効果

| コマンド | 主な出力 | 目的 | リーン的効果 |
| --- | --- | --- | --- |
| delta concept | 変更テーマ、影響範囲、目的 | 上流で変更群の流れを設計 | 過剰生産防止、Value Stream Design |
| delta propose | 差分単位の変更案、理由 | concept の枠内で差分を形成 | 過剰処理削減、標準化 |
| delta verify | 検証レポート、Rubric 整合 | 全フェーズ横断の品質ゲート | 自働化 (jidoka)、不良流出防止 |
| delta apply | 適用結果 (diff)、安定成果物 | 差分を成果物へ反映 | 一個流し、手戻り削減 |
| delta archive | 履歴、メタ情報、次 concept への参照 | フロー終端・整流 | 在庫ゼロ化、継続整流 |

## 6. delta verify ― 全フェーズに通底する品質ゲート

delta verify は特定工程ではなく、concept/propose/apply/archive に横断適用される「自働化された品質ゲート」です。

| 適用フェーズ | 検証内容 | 効果 |
| --- | --- | --- |
| concept | 範囲の妥当性、目的の明確さ | 変更範囲の過大化や曖昧さを検出 |
| propose | 差分整合性、Rubric 一致 | 矛盾や品質逸脱を防止 |
| apply | before/after の整合 | 差分反映時の破損・依存ミスを検出 |
| archive | 履歴構造、参照の完全性 | 記録欠落や誤リンクを防止 |

verify があることで「不良は工程内で止まる／正常な変更は滞りなく流れる」という理想状態を実現します。

## 7. フロー全体図

```
[delta concept] → [delta propose] → [delta apply] → [delta archive]
       ↑               ↑                ↑                ↑
       └───────────── delta verify ─────────────┘
```

この構造によりフロー全体が「止まらず」「壊れず」「滞留しない」。リーンでいう「自働化と一個流しの両立」が達成されます。

## 8. リーン的観点で見た delta フローの効果

| フェーズ | 生成物 | 主なリーン効果 |
| --- | --- | --- |
| concept | 変更群設計・流れの範囲 | 過剰生産防止、ムダ源の上流遮断 |
| propose | 差分単位の変更案 | 過剰処理削減、標準化、小ロット化 |
| verify | 検証レポート | 自働化、異常即停止、工程内品質保証 |
| apply | 実際の変更結果 | 一個流し、再生成排除、手戻り防止 |
| archive | 履歴・メタ情報 | 在庫ゼロ化、整流履歴、継続安定化 |

## 9. 結論：差分を流すことがリーンの本質

Proactive Delta Context は「変更差分だけを最小文脈で正確に処理する」仕組みであり、delta フローはそれを実働させる整流システムです。

- concept が流れを設計し  
- propose が最小変更を提案し  
- verify が全体品質を守り  
- apply が差分を正確に流し  
- archive が滞留をなくす  

この循環により、LLM 開発は「全体再生成サイクル」から「差分を流すリーンな一個流し」へ進化します。Proactive Delta Context が context-delta の根幹であり、delta コマンド群がその価値を実運用へ橋渡しします。
